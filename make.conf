#check native flags
#clang -march=native -E -v - </dev/null 2>&1|grep cc1
#gcc -march=native -E -v - </dev/null 2>&1|grep cc1

#CC="/usr/lib/llvm/6/bin/clang -std=c11"
#CXX="/usr/lib/llvm/6/bin/clang++ -stdlib=libc++ -std=c++14"

CC="/usr/lib/llvm/7/bin/clang"
CXX="/usr/lib/llvm/7/bin/clang++ -stdlib=libc++"
CPP="/usr/lib/llvm/7/bin/clang-cpp"
AR="/usr/lib/llvm/7/bin/llvm-ar"
NM="/usr/lib/llvm/7/bin/llvm-nm"
RANLIB="/usr/lib/llvm/7/bin/llvm-ranlib"

#LD="/usr/bin/ld.gold" #GNU Gold
LD="/usr/bin/ld.lld" #LLVM lld

#DBG: -Wall -Werror -pedantic -Wextra
#GCC: -fno-semantic-interposition -fipa-pta
#ALL: -fno-common -fno-unwind-tables -fno-asynchronous-unwind-tables
CFLAGS="-pipe -O2 -mtune=znver1 -march=znver1 -fomit-frame-pointer -flto=thin -finline-functions"
CXXFLAGS="${CFLAGS}"
FFLAGS="${CFLAGS}"
FCFLAGS="${CFLAGS}"
LDFLAGS="${CFLAGS} -Wl,--as-needed -Wl,--discard-all -Wl,--hash-style=gnu"
########################

USE="branding threads opengl custom-cflags luajit jemalloc jit
experimental expat openmp xattr pam nptl pgo gpm gmp ipv6 git ssl pcre
minimal seccomp caps filecaps libcxx lzma aio icu sqlite curl bzip2 zlib
uuid xml libressl json
-jpeg -png -gif -tiff -X -cairo -openssl -qt5 -ncurses -udev -slang -cjk
-truetype -egl -cups -lz4 -e2fsprogs -alsa -glamor -libedit -vdpau -lcms
-crypt -gpg -numa -nls -kde -exif -systemd -introspection -startup-notification
-gnome -zstd -iconv -debug -static-libs -static -pch -doc -policykit
-consolekit -acl -sanitize -dbus -gdbm -idn -berkdb -vala -cxx -xinerama
-readline -deprecated -sctp -fontforge -fontconfig -pax_kernel -ldap -sasl
-fortran -libnotify -inotify -gnutls -cracklib -wayland -wavpack -vorbis
-sslv2 -sslv3 -smartcard -man -compat -gles1 -gles2
"

LC_MESSAGES="C" #English build output
CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 sse4a ssse3"
CHOST="x86_64-pc-linux-gnu"
ACCEPT_KEYWORDS="~amd64"
VIDEO_CARDS=""
INPUT_DEVICES=""
CURL_SSL="libressl"
PYTHON_TARGETS="python3_7"
PYTHON_SINGLE_TARGET="python3_7"
RUBY_TARGETS="ruby25"
LUA_TARGETS="luajit2"
QEMU_SOFTMMU_TARGETS="x86_64"
QEMU_USER_TARGETS="x86_64"
PHP_TARGETS="php7-3"
FFTOOLS=""
L10N=""

EMERGE_DEFAULT_OPTS="--nospinner --ask --verbose"
MAKEOPTS="-j33 -l33"
PORTDIR="/var/db/repos/gentoo"
DISTDIR="/usr/distfiles"
#DISTDI="/var/cache/distfiles"
PKGDIR="/var/cache/packages"
PORTDIR_OVERLAY="/var/db/repos/local"
PORTAGE_NICENESS="15"
PORTAGE_IONICE_COMMAND="ionice -c 3 -p \${PID}"
PORTAGE_TMPDIR="/tmp"
#PORT_LOGDIR="/tmp/portage-logs"
FEATURES="usersandbox userfetch usersync userpriv sandbox fail-clean ipc-sandbox network-sandbox
cgroup news nodoc noinfo parallel-fetch parallel-install strict strict-keepdir unmerge-orphans
fixlafiles preserve-libs downgrade-backup collision-protect sfperms unknown-features-warn noman"
#protect-owned stricter"
#FEATURES="${FEATURES} test test-fail-continue"
COLLISION_IGNORE=""
CLEAN_DELAY="0"
EMERGE_WARNING_DELAY="0"
ACCEPT_LICENSE="* -@EULA"
CONFIG_PROTECT="/etc /etc/init.d /etc/conf.d /usr/share/gnupg/qualified.txt"
CONFIG_PROTECT_MASK="/etc/sandbox.d /etc/fonts/fonts.conf /etc/gentoo-release /etc/terminfo /etc/dconf /etc/ca-certificates.conf /etc/revdep-rebuild /etc/libvirt/nwfilter"
GENTOO_MIRRORS="http://gentoo.mirrors.easynews.com/linux/gentoo/ http://gentoo.mirrors.tds.net/gentoo http://mirrors.evowise.com/gentoo/ http://cosmos.illinois.edu/pub/gentoo/"
INSTALL_MASK="TODO
/usr/bin/bashbug

/usr/share/man
/usr/share/help

/etc/systemd
/usr/lib64/systemd
/usr/lib/systemd
/lib/systemd
/usr/lib64/portage/python2.7/install-qa-check.d/60systemd
/usr/share/nvim/runtime/*/systemd.vim
/usr/share/zsh/site-contrib/fast-syntax-highlighting/images

/usr/share/locale/*
/usr/share/bash-completion
/usr/share/bash_completion.d
/usr/share/cursors
/usr/share/fish
/usr/share/mkvtoolnix/sounds
/usr/share/xsessions
/usr/share/pixmaps
/usr/share/gtk-doc
/usr/share/icons/HighContrast
/usr/share/gnome-control-center
/usr/share/busybox
/usr/share/ffmpeg
"
PKG_INSTALL_MASK="${INSTALL_MASK}"
